<HTML>
<HEADER>
<TITLE>GXD EDITING INTERFACE: Anatomical Dictionary Editing Interface Requirements </TITLE>
</HEADER>

<BODY>
 
<H2>
GXD EDITING INTERFACE: Anatomical Dictionary Editing Interface Requirements</H2> <P>
<HR>
<H3>BACKGROUND CONCEPTS AND DEFINITIONS</H3>
This document is a subdocument of the <a href="MEI.html">MGI EDITING INTERFACE:
Design and Requirements</a> document.  It is assumed that constraints and assumptions noted there hold for the ADI. 
<p>
<b>Definitions:</b>
<p>
<dl>
	<dt>ADI
	<dd>Abbreviation for "Anatomical Dictionary Editing Interface". The ADI
is not actually a standalone editing interface, but one of the many editing
forms in the GXD Editing Interface.
 
	<p>
	<dt>wildcard
	<dd>The &quot;%&quot; character, used before, after, or surrounding a query term.  Example: &quot;%muscle&quot; will search for all terms that end with &quot;muscle&quot;.  Assume that all text query fields support wildcard searches unless it is explicitly stated otherwise.
	<p>
	<dt>node
	<dd>The visual representation of a structure in the Anatomical Dictionary.
	<p>
	<dt>currently-selected node
	<dd>That node that is highlighted in its stage tree by a black box, with 
the name of the structure in reverse video. The current structure's attributes will be displayed in the Edit form. 
</dl>
<P>

<H3>FUNCTIONAL REQUIREMENTS</H3>

<b>Entry Forms</b>
<p>
<IMG SRC="adi.gif">
<p>
The Anatomical Dictionary Editing Interface has six logical subforms within it:
<OL>

<LI><b>Edit</b>
<p>
<IMG SRC="adiEdit.gif">
<p>
<dl> 
	<dt>Structure
	<dd>Text field where one can specify either an alias or a preferred name for a structure to search for, or edit the preferred name of a structure.
<P>
	<dt>Notes
	<dd>Text field where one can specify a note to search for, or edit an existing note.
<P>
	<dt>MGI Aliases
	<dd>Table of MGI-added aliases associated with a structure.  Editable, but not searchable.  Searching for structures by their aliases is done using the Structure field.<P>
	<dt>Edinburgh Aliases
	<dd>Table of Edinburgh-added aliases associated with a structure. Not editable or searchable.
<P>
	<dt>MGI Added
	<dd>Allows user to restrict searches to MGI-added structures, Edinburgh-added structures, or to specify no restriction (&quot;Search All&quot; option).  Displays the MGI-added attribute for a node, if a node is selected.
<P>
	<dt>MGI Added Name
	<dd>Allows user to restrict searches to MGI-added names, Edinburgh-added names, or to specify no restriction (&quot;Search All&quot; option). By names, we mean "preferred names" or "aliases". Search field only - does not display results.
<P>
	<dt>PrintStop set
	<dd>Allows user to restrict searches to structures that have their printStop set, not set, or to specify no restriction (&quot;Search All&quot; option).  Displays 
the printStop status for a node, if a node is selected.
<P>
	<dt><a name="StagesSyntax">Stage(s)</a>
	<dd>Text field allowing the user to restrict what stages are searched during a query. Displays the stage of the current structure if the user has selected a node.  Query syntax examples:
<P>
&quot;4&quot;: Searches only stage 4.
<P>
&quot;1-4&quot;: Searches stages 1 through 4, inclusive.
<P>
&quot;8, 10, 12&quot;: Searches stages 8, 10, and 12 only.
<P>
&quot;1-4, 8, 10-12&quot;: Searches stages 1 through 4, stage 8, and stages 10 through 12.
<P>
</dl>
<P>

<LI><b>Stage Trees</b> 
<p>
<IMG SRC="adiStageTrees.gif">
<p>
Visual representation of the Anatomical Dictionary's structure hierarchy. 
All 28 stages are shown as children of a node called "Stages".  Each stage
tree is empty initially, until a query is done that contains results within
a particular tree.  Trees are loaded once per session (unless explicitly cleared) and are incrementally updated to reflect modifications to the database.
Clicking on a node within the tree causes that node to become the current node,
displaying the node's attributes in the Edit form.
<p>
Structures are represented by "folder" and "leaf" nodes. Folders contain 
other nodes and are drawn as the familiar file folder icon. Leaf nodes
have no children and are drawn as a small gray sphere (for lack of a better icon
for a tissue).
<p>
Navigating the tree is done by double-clicking on closed folders to open them and display their children. Open folders may be closed by double-clicking on them,or single-clicking the adjacent '-/+' icons.
<p>

<LI><b>Search Results</b>
<p>
<IMG SRC="adiSearch.gif">
<p>
<dl>
	<dt>Results count
	<dd>"n Search Results" is displayed after each search, showing how
many results were returned.
    <p>
	<dt>Results list
	<dd>A list of structure results from the last query. Each row has the 
        form: <br>
        <p>
        <em>StageNN:structure1;structure2;...;structureK</em> 
        <p>
		(The exact form of the qualified name depends on the setting of
         the printStop attribute for that node).
        <p>
        Clicking on each row changes the current structure to the
        one described by that row, populates the edit form, and traverses
        the treeDisplay to show the chosen node. 
</dl>
<p>

<LI><b>Control</b>
<p>
<IMG SRC="adiControl.gif">
<p>
<dl>
	<dt>Search
	<dd>Initiates a search, using the content of the Edit form as search criteria.
	<p>
	<dt>Clear
	<dd> Has two pulldown options: 
	<ul>
        <li>Clear: Clears the edit form
 		<li>Clear Form/Stages: Clears the edit form and purges all loaded subtrees (not usually necessary, unless one wants to detect deletes performed by
other users). 
	</ul>
	Neither clear operation affects the Structure Clipboard.
	<p>
	<dt>Modify
	<dd>Updates the current record with changes specified in the Edit form. 
	<p>
	<dt>Add
	<dd>Invokes an Add dialog that contains a subset of the fields used within
        the Edit form.  Allows a new node to be created as a child of the 
        currently-selected node.
	<p>
	<dt>Delete
	<dd>Deletes the currently-selected node.
	<p>
	<dt>Previous (an arrow button, pointing up)
	<dd>Traverses up the search results list, changing the current node to the one previous in the list. 
	<p>
	<dt>Next (an arrow button, pointing down) 
	<dd>Traverses down the search results list, changing the current node to the one next in the list. 
	<p>
	<dt>Created
	<dd>Displays the date the current node was created.
	<p>
	<dt>Modified
	<dd>Displays the date the current node was last modified.
	<p>
</dl>
<p>


<LI><b>Structure Clipboard</b>
<p>
<IMG SRC="adiClipboard.gif">
<p>
The structure clipboard is an area used to assemble sets of structures that will be used during the entering of assay data.
<p>
<dl>
	<dt>Add Current
	<dd>Add the current structure to the clipboard table.
	<p>
	<dt>Delete
	<dd>Deletes the current structure from the selected row in the clipboard table.
	<p>
	<dt>Clear
	<dd>Clears all rows in the clipboard table.
	<p>
</dl>
<p>
<LI> <b> Add Dialog </b>
<p>
<IMG SRC="adiAddDialog.gif">
<p>
Fields are identical in semantics to those in the Edit form, except for the
query semantics associated with the Edit form fields. The Add operation is used for specifying a new node, not searching for one.
<p>
</OL>


<b>Behavior of Interface</b>
<p>
Searching<br>
<ol>
    <li>All stages, 1-28, are displayed as children of a root node called "Stages". All stage trees are initially empty, and require querying structures within them before a tree will be loaded.  Clicking on a stage node will <em>not</em>
load the data for that stage.
    <p>
	<li>Searching can be done using a combination of five query fields:
Structure, Notes, MGI Added, PrintStop Set, and Stage(s).  Wildcards may be
used in the Structure and Notes fields.  Searches are done using the 
conjunction of these query fields.
	<p>
	<li>Results are displayed in the Search Results area, and the first
structure returned becomes the current structure.  That structure's attributes
are displayed in the Edit form. 
	<p>
	<li>The current structure is selected either automatically, when at 
least one query result is returned, or manually by:
    <ul>
    	<li> clicking in the Search Results list.
    	<p>
    	<li> pressing the "Next" or "Previous" arrow buttons. 
    	<p>
    	<li> navigating the Stage Tree display and explicitly clicking on a node. 
    	<p>
    </ul>
	<p>
</ol>

Editing<br>
<ol>
	<li> Child structures may be added to any node in the stage tree display, besides the root of the hierarchy (the "Stages" node). The number of stages is fixed, as far as the ADI is concerned.
	<p>
	<li> The only required field for an Add operation (after selecting the
parent node) is the preferred name of the structure.
	<p>
	<li> Only leaf nodes (depicted as spheres) may be deleted, and then only
if they are not referenced from assay data. 
	<p>
	<li> Printstop bits may not be cleared for immediate descendents of Stage nodes.
	<p>
	<li> Preferred names of structures may be changed, as long as the node 
is an MGI-added node. Edinburgh-added nodes may not have their preferred names changed, and their aliases are also uneditable.
	<p>
	<li> MGI-aliases may be added/modified for both MGI and Edinburgh nodes.
	<p>
	<li> PrintStops may be set for both MGI and Edinburgh nodes.
	<p>
	<li> Notes may be changed for both MGI and Edinburgh nodes.
	<p>
</ol>

<center><table>
	<tr>
		<th>Field name</th><th>Operations</th>
	</tr>

	<tr>
		<td>Structure</td><td>S,M,R</td>
	</tr>

	<tr>
		<td>Notes</td><td>S,M,R</td>
	</tr>

	<tr>
		<td>MGI-Aliases</td><td>M,R</td>
	</tr>

	<tr>
		<td>Edinburgh-Aliases</td><td>R</td>
	</tr>

	<tr>
		<td>MGI Added?</td><td>S,R</td>
	</tr>

	<tr>
		<td>PrintStop Set?</td><td>S,M,R</td>
	</tr>

	<tr>
		<td>Stage(s)</td><td>S,R</td>
	</tr>

	<tr>
		<td>Stage Trees</td><td>R</td>
	</tr>
</table>
<table border>
	<tr>
		<th>Symbol</th><th>Meaning</th>
	</tr>
	<tr>
		<td>S</td><td>Used during "Search"</td>
	</tr>
	<tr>
		<td>M</td><td>Used during "Modify"</td>
	</tr>
	<tr>
		<td>R</td><td>Used for displaying result attributes</td>
	</tr>
</table>
</center>

<b>(Diversions from MEI)</b>
<ol>
	<li> Structures may be selected that haven't been queried, through
interacting with loaded stage trees. The MEI only allows records that
have been queried (or added) to become current. 
	<p>
	<li> Adding a Structure does not cause that structure to become the
current structure, to facilitate adding multiple children of a single parent.
The MEI always context-switches to the recently-added record.
</ol>

<H3>OUTSTANDING TASKS</H3>
<OL>
	<LI> Update the "Anatomical Dictionary Editing Interface Design" to
reflect the latest changes in the ADI.
</OL>

<H3>RELATED DOCUMENTS</H3>
<OL>
	<li> "Anatomical Dictionary Editing Interface Design" - this is the
primary source for information about the ADI.
</OL>

<HR>

</BODY>
</HTML>


<HTML>
<HEADER>
<TITLE>
Sybase Admin
</TITLE>
</HEADER>

<BODY>

<H2>
Sybase Admin
</H2>

<H4>Introduction</H4>
This document provides a description of the <CODE>kelso:$SYBASE/admin</CODE> directory
and the utility programs installed within this directory structure.

<H4>Sybase-specific Utilities</H4>
Directories which contain shell scripts for defining Sybase-specific attributes such as
column defaults, indexes, keys, permissions, rules, triggers, etc.  Any such attributes
which are part of the Production database must be defined within one of these directories.
<P>
Conventions used for these directories:
<OL>
<LI>All scripts use the C-shell (<CODE>#!/bin/csh -f</CODE>) to execute.
<P>
<LI>Some directories contain shell script files for each data set.  That is, instead
    of one shell script which contains the commands for the entire database, multiple
    shell script files exist which contain the commands for a specific data set within
    the database:
    <P>
	<UL>
	<LI>Permissions
	<LI>Procedures
	<LI>Triggers
	<LI>Views
	</UL>
    <P>
    The shell scripts in these directories use specific prefixes based on the data set
    to which the SQL commands refer:
    <P>
        <TABLE BORDER=1>
        <TR ALIGN=left><TH>Data Set<TH>Prefix
	<TR><TD>Accession<TD>ACC
	<TR><TD>Reference<TD>BIB
	<TR><TD>GBASE<TD>GBASE (obsolete?)
	<TR><TD>GXD<TD>GXD
	<TR><TD>GXD Controlled Vocabulary<TD>GXD_CV
	<TR><TD>Homology<TD>HMD
	<TR><TD>MLC<TD>MLC
	<TR><TD>MLC edit<TD>MLC_edit
	<TR><TD>Mapping<TD>MLD
	<TR><TD>Marker<TD>MRK
	<TR><TD>Marker Transfer<TD>MRKXfer
	<TR><TD>Molecular Segments<TD>PRB
	<TR><TD>Cross (controlled vocabulary)<TD>CRS
	<TR><TD>RI Sets (controlled vocabulary<TD>RI
	<TR><TD>Miscellaneous<TD>MISC
	<TR><TD>System<TD>SYS
	<TR><TD>Nomen<TD>NOMEN
	</TABLE>
    <P>
    The shell scripts in these directories use specific suffixes:
    <P>
        <TABLE BORDER=1>
        <TR ALIGN=left><TH>Directory<TH>Suffix
	<TR><TD>Permissions<TD><CODE>.grant</CODE>
	<TR><TD>Procedures<TD><CODE>.pr</CODE>
	<TR><TD>Triggers<TD><CODE>.tr</CODE>
	<TR><TD>Views<TD><CODE>.view</CODE>
	</TABLE>
    <P>
    Within each of these directories there may also be corresponding <I>drop</I> shell scripts:
    <P>
        <TABLE BORDER=1>
        <TR ALIGN=left><TH>Directory<TH>Suffix
	<TR><TD>Triggers<TD><CODE>.drop</CODE>
	</TABLE>
    <P>
    Within each of these directories, there may also be a master shell script which will execute
    each shell script with the specific directory suffix.  This means that if an SE adds a
    new script to the directory with the appropriate suffix, then it will be executed when
    the master shell script is executed.  This makes it easy for an SE to install all attributes
    for a data set with one command.
    <P>
        <TABLE BORDER=1>
        <TR ALIGN=left><TH>Directory<TH>Suffix
	<TR><TD>Permissions<TD><CODE>permissions.sh</CODE>
	<TR><TD>Procedures<TD><CODE>procedures.sh</CODE>
	<TR><TD>Triggers<TD><CODE>triggers.sh, triggers_drop.sh</CODE>
	<TR><TD>Views<TD><CODE>views.sh</CODE>
	</TABLE>
    <P>
<P>
<LI>All other shell scripts end with the suffix <CODE>.sh</CODE>.
<P>
<LI>All shell scripts expect the following parameters:
    <P>
        <TABLE BORDER=1>
        <TR ALIGN=left><TH>Parameter<TH>Description
	<TR><TD>1<TD>DSQUERY value; database server
	<TR><TD>2<TD>MGD value; database
	</TABLE>
<P>
</OL>

<H4>Directories (<CODE>$SYBASE/admin</CODE>)</H4>
	<TABLE BORDER=1>
	<TR ALIGN=left><TH>Directory<TH>Script names<TH>Description

	<TR><TD><CODE>defaults</CODE>
    	<TD><CODE>defaults.sh</CODE>
    	<TD>SQL commands which unbind, drop, create and bind defaults to table columns.

	<TR><TD><CODE>indexes</CODE>
	    <TD>&nbsp;
	    <TD>SQL commands which drop and create indexes to table columns.

	<TR><TD><CODE>keys</CODE>
	    <TD>&nbsp;
	    <TD>SQL commands which drop and create primary and foreign keys to table columns.

	<TR><TD><CODE>migration</CODE>
	    <TD>MGI1.0 (dir), MGI2.0 (dir), MGI2.2 (dir), nomen (dir), oldMGI1.0 (dir), document1.pdf
	    <TD>Contains subdirectories which contain scripts for data migration of every
		database release.

	<TR><TD><CODE>nomen</CODE>
	    <TD>&nbsp;
	    <TD>&nbsp;

	<TR><TD><CODE>permissions</CODE>
	    <TD>&nbsp;
	    <TD>SQL commands which grant and revoke permissions to tables.

	<TR><TD><CODE>procedures</CODE>
	    <TD><CODE>{prefix}.pr, procedures.sh, pr.drop</CODE>
	    <TD>SQL commands which drop and create stored procedures.

	<TR><TD><CODE>rules</CODE>
	    <TD>&nbsp;
	    <TD>SQL commands which unbind, drop, create and bind rules to table columns.

	<TR><TD><CODE>schema</CODE>
	    <TD>&nbsp;
	    <TD>&nbsp;

	<TR><TD><CODE>tables</CODE>
	    <TD>&nbsp;
	    <TD>&nbsp;

	<TR><TD><CODE>tables</CODE>
	    <TD><CODE>drop_GXD_tables.sh, drop_tables.sh, nomentables.sh, tables.sh</CODE>
	    <TD>&nbsp;

	<TR><TD><CODE>triggers</CODE>
	    <TD><CODE>{prefix}.tr, {prefix}.drop, triggers.sh, triggers_drop.sh</CODE>
	    <TD>SQL commands which drop and create triggers.

	<TR><TD><CODE>views</CODE>
	    <TD><CODE>{prefix}.view, views.sh</CODE>
	    <TD>SQL commands which drop and create views.

	<TR><TD><CODE>wts</CODE>
	    <TD>&nbsp;
	    <TD>&nbsp;

	</TABLE>

<H4>Utilities (<CODE>$SYBASE/admin/utilities</CODE>)</H4>
	<TABLE BORDER=1>
	<TR ALIGN=left><TH>Directory<TH>Script names<TH>Description<TH>Staff

	<TR><TD><CODE>MAINTENANCE</CODE>
    	<TD><CODE>Accession</CODE>
	    <BR>
	    <CODE>Hybridizes</CODE>
	    <BR>
	    <CODE>Substitutions</CODE>
    	<TD>Contains maintenance scripts for cleanup, etc.
	<TD>Lori, Rick

	<TR><TD><CODE>MIT</CODE>
    	<TD><CODE>mitClean.py</CODE>
	    <BR>
	    <CODE>mitCleanDotted.py</CODE>
	    <BR>
	    <CODE>mitLoad.py</CODE>
	    <BR>
	    <CODE>mitLoad.sh</CODE>
    	<TD>Loads MIT Physical Mapping (Contig) data and MIT RFLP data.
	<TD>Lori, Rick

	<TR><TD><CODE>MLC</CODE>
    	<TD>&nbsp;
    	<TD>Obsolete?  Transfers MLC "edit" records to MLC production records.
	<TD>Lori, Geoff

	<TR><TD><CODE>MRK</CODE>
    	<TD><CODE>createMRK.py</CODE>
	    <BR>
	    <CODE>createMRK.sh</CODE>
    	<TD>Creates MRK_Name, MRK_Symbol and MRK_Reference tables.
	<TD>Lori, Geoff

	<TR><TD>&nbsp;
	<TD><CODE>RI_Summary.py</CODE>
		<BR>
	        <CODE>RI_Summary.sql</CODE>
		<BR>
	        <CODE>RI_Summary.bcp</CODE>
		<BR>
	        <CODE>RI_Summary_Expt_Ref.bcp</CODE>
    	<TD>Loads RI Summary tables from all RI Mapping tables.
	<TD>Lori, Rick

	<TR><TD>&nbsp;
	<TD><CODE>loadHomology.py</CODE>
	    <BR>
	    <CODE>loadHomology.sh</CODE>
    	<TD>Processes and loads GDB and RatMap Accession numbers
	<TD>Lori, Rick

	<TR><TD><CODE>rircloads</CODE>
    	<TD><CODE>RIload.py</CODE>
    	<TD>Loads RI or RC data into RI Mapping tables from specific input files.
	<TD>Lori, Rick

	<TR><TD><CODE>strains</CODE>
    	<TD><CODE>slms.py</CODE>
	    <BR>
	    <CODE>slms.sh</CODE>
    	<TD>Strain List Maintenance for Moyha's Master Strain Spreadsheet
	<TD>Lori, Rick

	</TABLE>

</BODY>
</HTML>

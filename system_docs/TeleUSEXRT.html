<HTML><HEAD>
<TITLE>MGI Editing Interface:  TeleUSE/XRT Integration</TITLE>
</HEAD>

<BODY>

<H2>MGI Editing Interface:  TeleUSE/XRT Integration</H2>

<H4>Introduction</H4>

This document describes the procedures for building the TeleUSE/XRT integration
after the TeleUSE release has been installed by the System Administrator.

<H4>Why</H4>
The XRT components are not available unless the TeleUSE binaries are recompiled.

<H4>Configuration</H4>
<TABLE BORDER=1>
<TR ALIGN=left><TH>Host<TH>TeleUSE Version<TH>XRT Version<TH>TeleUSE directory<TH>Date of Install
<TR><TD>junior<TD>3.2<TD>Vol. 12/PDS v 1.0.1<TD><CODE>/opt/teleuseXRT</CODE><TD>April, 1999
<TR><TD>argus<TD>3.1<TD>Vol. 12/PDS v 1.0.1<TD><CODE>/opt/teleuseXRT</CODE><TD>April, 1998
<TR><TD>mishka<TD>3.1<TD>Vol. 12/PDS v 1.0.1<TD><CODE>/opt/teleuseXRT</CODE><TD>April, 1998
<TR><TD>titan<TD>3.1<TD>Vol. 12/PDS v 1.0.1<TD><CODE>/opt/teleuseXRT</CODE><TD>April, 1998
<TR><TD>ceegee<TD>3.1<TD>Vol. 12/PDS v 1.0.1<TD><CODE>/opt/teleuseXRT</CODE><TD>April, 1999
</TABLE>

<P>
Note:  If the TeleUSE directory changes, then this change needs to be propagated to the application 
run scripts which set the TeleUSE directory path 
(see <A HREF="MGIREADME.html#config">Application Configuration Files</A>)
and any <CODE>.viprc</CODE> files which exist in the development application directories.

<P>
The directory <CODE>$TeleUSE/conf/xrt</CODE> contains all of the files necessary
to perform the integration.  The integration will build and install new versions of the following
(saving the original files with a <CODE>.orig</CODE> extension, where applicable):
	<UL>
	<LI><CODE>$TeleUSE/bin/vip</CODE>
	<LI><CODE>$TeleUSE/bin/gstub</CODE>
	<LI><CODE>$TeleUSE/bin/cuil</CODE>
	<LI><CODE>$TeleUSE/lib/libXrtwit.a</CODE>
	<LI><CODE>$TeleUSE/lib/libXpm.a</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/xrt.pcd</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/XRT_3d.pcd</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/XRT_PDS.pcd</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/XRT_field.pcd</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/XRT_gear.pcd</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/XRT_graph.pcd</CODE>
	<LI><CODE>$TeleUSE/lib/pcds/XRT_table.pcd</CODE>
	<LI><CODE>$TeleUSE/env/libdir/xrt.libdir</CODE>
	<LI><CODE>$TeleUSE/pixmaps/*.xbm</CODE>
	<LI><CODE>$TeleUSE/pixmaps/*.xpm</CODE>
	</UL>
<P>
<H4>Integration</H4>
For first time integration of a newly installed TeleUSE release and XRT or for a rebuild of
a previously built TeleUSE/XRT integration.
<OL>
<LI>Verify that the GNU (gcc) compiler is installed on the system.
<P>
<LI>Perform the integration as user <CODE>root</CODE> and set the proper environment variables:
	<PRE>
	setenv TeleUSE          /opt/teleuseXRT
	setenv VIPIMAGES        $TeleUSE/pixmaps
	setenv XRTHOME          $TeleUSE/XRT
	setenv XNLSPATH         $TeleUSE/X11R5/lib/nls
	setenv XUSERFILESEARCHPATH %N:$OPENWINHOME/lib/app-defaults/%L/
			%N:$OPENWINHOME/lib/app-defaults/
			%N:$TeleUSE/appl_res/%L/
			%N:$TeleUSE/appl_res/
			%N:/usr/lib/X11/app-defaults/%L/
			%N:/usr/lib/X11/app-defaults/%N
	setenv XKEYSYMDB        $OPENWINHOME/lib/XKeysymDB
	setenv LD_LIBRARY_PATH  TeleUSE/lib:$TeleUSE/Motif1.2/lib:$OPENWINHOME/lib:/usr/lib:/usr/ucblib
 
	set path = (. ~ ~/bin $OPENWINHOME/bin /usr/sbin /usr/ccs/bin /usr/bin 
		    /usr/ucb /usr/dt/bin $TeleUSE/bin $XRTHOME/bin /usr/local/bin)
	</PRE>
<P>
<LI>Unset the <CODE>SYBASE</CODE> environment variable, if it is set.  If this variable is set,
    then the build will attempt to build the TeleUSE/DB libararies, which we do not use.
    <PRE>
    unsetenv SYBASE
    </PRE>
<P>
<LI>Edit <CODE>$TeleUSE/env/lookup/solaris</CODE> to use the GNU compiler:
	<PRE>
	CC      d       gcc\ -DSVR4
	</PRE>
<P>
<LI>Save a copy of <CODE>$TeleUSE/conf/xrt/Makefile</CODE> to <CODE>$TeleUSE/conf/xrt/Makefile.orig</CODE>
    and edit <CODE>$TeleUSE/conf/xrt/Makefile</CODE> to use the GNU compiler:
	<PRE>
	$(MAKEFILE): $(TU_CONFIG_XRT)
        $(TU_CONFIG_XRT) $(XRT_PDS_COMPONENTS)
        # Alter Makefile.xrt to use gcc - gld
        # add the CC = gcc if CC def not present, and change CC = cc to
        # CC = gcc if CC is defined.
        sed -f modify_xrt_aw.sed Makefile.xrt > Makefile.xrt.new
        mv Makefile.xrt.new Makefile.xrt
	</PRE>
    <P>
    A sed script has been created locally to change the TeleUSE-generated <CODE>Makefile.aw</CODE>
    to use 'CC = gcc'.  The <CODE>$TeleUSE/conf/xrt/modify_xrt_aw.sed</CODE> file can be copied from a 
    current version of <CODE>$TeleUSE/conf/xrt</CODE> or created as follows:
	<PRE>
	# The following changes "CC = cc" to "CC = gcc"
	# in the target (Makefile.xrt)
	#
	# Makefile.xrt is modified to invoke sed to change the
	# tuawt-generated Makefile.aw to use "CC = gcc"
	#
	# Usage:
	#
	#    sed -f modify_xrt_aw.sed Makefile.xrt > Makefile.xrt.new
	#
	 
	/\$(MAKE) *-f *\$(MAKEFILE)$/i\
        	sed 's/CC *= *cc/CC      = gcc/' $(MAKEFILE) > $(MAKEFILE).tmp\
        	mv $(MAKEFILE).tmp $(MAKEFILE)

	</PRE>
<P>
<LI>Copy color files for TeleUSE applications:
	<PRE>
	cp $TeleUSE/appl_res/Vip.color $TeleUSE/appl_res/Vip
	cp $TeleUSE/appl_res/Dbug.color $TeleUSE/appl_res/Dbug
	cp $TeleUSE/appl_res/Pixed.color $TeleUSE/appl_res/Pixed
	cp $TeleUSE/appl_res/Bugrpt.color $TeleUSE/appl_res/Bugrpt
	cp $TeleUSE/appl_res/Guict.color $TeleUSE/appl_res/Guict
	cp $TeleUSE/appl_res/Misadmin.color $TeleUSE/appl_res/Misadmin
	</PRE>
<P>
<LI>Copy the header file <CODE>$TeleUSE/conf/xrt/XrtExtra.h</CODE> to the directory
    <CODE>$XRTHOME/include/Xm</CODE> (per <CODE>$TeleUSE/conf/xrt/README</CODE>).
	<PRE>
	cp $TeleUSE/conf/xrt/XrtExtra.h $XRTHOME/include/Xm
	</PRE>
<P>
<LI>Run <CODE>make clean</CODE> from <CODE>$TeleUSE/conf/xrt</CODE> if you are re-building
    a previously built intergration.
	<PRE>
	make clean
	</PRE>
<P>
<LI>Run <CODE>make</CODE> from <CODE>$TeleUSE/conf/xrt</CODE>.
	<PRE>
	make
	</PRE>
<P>
<LI>Edit <CODE>$TeleUSE/conf/xrt/xrt.pcd</CODE>.  Remove the XmXrtField, XmXrtFldManager, 
    and XmXrtManager widget classes. These widget class templates should not be used in 
    development because they are only meta classes in the widget hierarchy used by XRT.
    (per <CODE>$TeleUSE/conf/xrt/README</CODE>)
<P>
<LI>Run <CODE>make install</CODE> from <CODE>$TeleUSE/conf/xrt</CODE>.
	<PRE>
	make install
	</PRE>
<P>
<LI>As a non-root user, <A HREF="MGIREADME.html#installsource">install</A> and
    <A HREF="MGIREADME.html#buildProd">build Production copies of the 
    MGI Editorial applications</A> and test.
<P>
</OL>

<HR>
</BODY></HTML>
